# Описание пакета Primo.AI.Server

Пакет **Primo.AI.Server** предоставляет инструменты для взаимодействия с сервером искусственного интеллекта в проектах RPA, связанных с обработкой изображений.

## Общие сведения

**Primo.AI.Server** реализована для взаимодействия с решением Primo RPA AI Server. Библиотека содержит набор элементов для разработки RPA-проекта, ключевой задачей которого является получение результатов распознавания данных в изображениях с помощью обученной модели.

## Инструкции по началу работы

Чтобы установить пакет **Primo.AI.Server**, воспользуйтесь Менеджером зависимостей в Primo RPA Studio или посетите [NuGet.org](https://www.nuget.org/).

### Шаги для установки

1. **Откройте Менеджер зависимостей:**
   - В главном меню Primo RPA Studio выберите `Управление зависимостями`.
   - Или щелкните правой кнопкой в панели проекта и выберите в отобразившемся меню пункт «Зависимости».

2. В открывшемся окне перейдите в раздел **NuGet.org** и введите **System.Drawing.Common** в строку поиска. Данная библиотека необходима для корректной установки **Primo.AI.Server**.

3. Нажмите на значок с воронкой для отображения списка доступных библиотек. 

4. Выберите **System.Drawing.Common** и нажмите **Установить**.

4. Нажмите **Сохранить**. 

5. В открывшемся модальном окне нажмите **Установить** и затем **Закрыть** для завершения установки.

6. Таким же способом установите **Primo.AI.Server**.

6. После установки библиотеки в панели элементов появится группа **AI**.

## Документация

Для более подробной информации о настройке и использовании **Primo.AI.Server** посетите [документацию на нашем сайте](https://docs.primo-rpa.ru/primo-rpa/g_elements/el_extra/ai_server).

## Состав библиотеки

Библиотека включает в себя следующие возможности:

- **Сервер Primo.AI** — производит подключение к Primo RPA AI Server, а также выполняет роль контейнера для других элементов из библиотеки Primo.AI.Server.
- **Создать запрос** — отправляет запрос на распознавание документа в Primo RPA AI Server.
- **Получить результат** — получает от Primo RPA AI Server результат распознавания документа обученной моделью нейронной сети.
- **Проверить документ** — производит валидацию распознанных данных и позволяет скорректировать их.

Для использования элемента необходимо перетащить его в рабочее поле проекта Primo RPA Studio.

## Свойства элементов библиотеки

### Общие

Раздел **Общие** есть у каждого элемента, в него входят следующие свойства:

- Наименование
- Отключение логирования
- Пауза до/после
- Продолжение при ошибке
- Скриншот завершения
- Скриншот ошибки
- Тайм-аут

С описанием общих свойств можно ознакомиться на нашем сайте [здесь](https://docs.primo-rpa.ru/primo-rpa/primo-rpa-studio/process/elements).

### Элемент "Сервер Primo.AI"

 Производит подключение к сервису Primo RPA AI Server. Элемент выполняет роль контейнера для других компонентов, работающих с Primo RPA AI Server, а именно:

- для элемента **Создать запрос**;
- для элемента **Получить результат**. 

Включает в себя следующие свойства:

1. **Сервер**:
   - Сервер — адрес сервера. Пример: `https://ip:port/`
   - Тайм-аут — предельное время ожидания действий сервера, указывается в миллисекундах. По умолчанию 30000.

### Элемент "Создать запрос"

Отправляет запрос на распознавание документа в Primo RPA AI Server. Перед началом работы необходимо подготовить изображение, соответствующее [требованиям к изображениям для инференса](https://docs.primo-rpa.ru/primo-rpa/primo-rpa-ai-server/other/inference-quality-requirements).

Включает в себя следующие свойства:

1. **Вывод**:
   - Результат — название переменной, в которую будет сохранен идентификатор запроса на сервере. Идентификатор генерируется автоматически. Позже его можно использовать в элементе **Получить результат**.
2. **Обработка**:
   - Документ — путь к документу для распознавания. Например, создайте в RPA-проекте папку `Data`, разместите в ней файл и укажите в данном свойстве путь: `System.IO.Path.Combine(_Workflow.ProjectPath,"Data","название_файла.расширение")`. Обязательно для заполнения.
   - Тип модели — название типа модели, который будет обрабатывать документ. Должно совпадать с названием в **Primo RPA AI Server**, регистр важен. Пример: `torg12`.

### Элемент "Получить результат"

Получает от Primo RPA AI Server результат обработки документа. Результат сохраняется в переменную, указанную пользователем в свойствах элемента.

Включает в себя следующие свойства:

1. **Вывод**:
   - Результат — название переменной, в которую сохранится результат обработки документа.
2. **Обработка**:
   - Ключ запроса — идентификатор запроса к Primo RPA AI Server. Получить его можно в результате выполнения элемента Создать запрос. Обязательно для заполнения.

### Элемент "Проверить документ"

Проверяет результат распознавания документа. Результат распознавания в данном контексте — это переменная, которую получают с помощью элемента **Получить результат**. Элемент **Проверить документ** валидирует содержимое этой переменной и сохраняет результат валидации в новую переменную с тем же типом данных. Во время валидации открывается диалоговое окно с изображением документа и распознанными полями:
   - Зеленым цветом выделены успешно распознанные блоки.
   - Желтым либо красным — требующие внимания.

Необходимо проверить состояние параметра "Сворачивать Студию" в [настройках приложения](https://docs.primo-rpa.ru/primo-rpa/primo-studio/settings#otladchik). Если Студия не сворачивается, то сверните приложение самостоятельно, чтобы увидеть окно валидации.

![alt text](image-2.png)

Окно валидации предоставляет возможность изменить данные, требующие корректировки. Для этого выберите нужный блок на изображении и скорректируйте данные в самом блоке, либо в нижней панели. Для перемещения между блоками также можно использовать кнопки слева от панели редактирования.

Для завершения редактирования нажмите кнопку ![alt text](image-5.png)

Элемент включает в себя следующие свойства:

1. **Вывод**:
   - Результат обработки — название переменной, в которую сохранится проверенный результат распознавания.
2. **Обработка** (обязательно для заполнения):
   - Документ — путь к файлу обрабатываемого документа. Обязательно для заполнения.
   - Результат распознавания — название переменной с результатом распознавания документа.

## Обратная связь

Если у вас возникли вопросы или предложения, пожалуйста, свяжитесь с нами по адресу [support@primo-rpa.ru](mailto:support@primo-rpa.ru).
